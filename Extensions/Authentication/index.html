<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="LibreNMS">
        <link rel="canonical" href="http://docs.librenms.org/Extensions/Authentication/">
        <link rel="shortcut icon" href="../../img/favicon.ico">

	<title>Authentication - LibreNMS Documentation</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <link href="../../librenms.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../..">LibreNMS Documentation</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../..">Home</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">API <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../API/API-Docs/">API Docs</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Developing <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../Developing/Code-Guidelines/">Code Guidelines</a>
</li>

                        
                            
<li >
    <a href="../../Developing/Code-Structure/">Code Structure</a>
</li>

                        
                            
<li >
    <a href="../../Developing/Dynamic-Config/">Dynamic Config</a>
</li>

                        
                            
<li >
    <a href="../../Developing/Sensor-State-Support/">Sensor State Support</a>
</li>

                        
                            
<li >
    <a href="../../Developing/Style-Guidelines/">Style Guidelines</a>
</li>

                        
                            
<li >
    <a href="../../Developing/Using-Git/">Using Git</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Extensions <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../Alerting/">Alerting</a>
</li>

                        
                            
<li >
    <a href="../Applications/">Applications</a>
</li>

                        
                            
<li class="active">
    <a href="./">Authentication</a>
</li>

                        
                            
<li >
    <a href="../Auto-Discovery/">Auto Discovery</a>
</li>

                        
                            
<li >
    <a href="../Billing-Module/">Billing Module</a>
</li>

                        
                            
<li >
    <a href="../Component/">Component</a>
</li>

                        
                            
<li >
    <a href="../Dell-OpenManage/">Dell OpenManage</a>
</li>

                        
                            
<li >
    <a href="../Device-Groups/">Device Groups</a>
</li>

                        
                            
<li >
    <a href="../Distributed-Poller/">Distributed Poller</a>
</li>

                        
                            
<li >
    <a href="../Email-Alerting/">Email Alerting</a>
</li>

                        
                            
<li >
    <a href="../Globe-Frontpage/">Globe Frontpage</a>
</li>

                        
                            
<li >
    <a href="../Graylog/">Graylog</a>
</li>

                        
                            
<li >
    <a href="../IRC-Bot-Extensions/">IRC Bot Extensions</a>
</li>

                        
                            
<li >
    <a href="../IRC-Bot/">IRC Bot</a>
</li>

                        
                            
<li >
    <a href="../InfluxDB/">InfluxDB</a>
</li>

                        
                            
<li >
    <a href="../Interface-Description-Parsing/">Interface Description Parsing</a>
</li>

                        
                            
<li >
    <a href="../MIB-based-polling/">MIB based polling</a>
</li>

                        
                            
<li >
    <a href="../Memcached/">Memcached</a>
</li>

                        
                            
<li >
    <a href="../Network-Map/">Network Map</a>
</li>

                        
                            
<li >
    <a href="../Oxidized/">Oxidized</a>
</li>

                        
                            
<li >
    <a href="../Plugin-System/">Plugin System</a>
</li>

                        
                            
<li >
    <a href="../Poller-Service/">Poller Service</a>
</li>

                        
                            
<li >
    <a href="../Port-Description-Parser/">Port Description Parser</a>
</li>

                        
                            
<li >
    <a href="../Proxmox/">Proxmox</a>
</li>

                        
                            
<li >
    <a href="../RRDCached/">RRDCached</a>
</li>

                        
                            
<li >
    <a href="../RRDTune/">RRDTune</a>
</li>

                        
                            
<li >
    <a href="../SNMP-Proxy/">SNMP Proxy</a>
</li>

                        
                            
<li >
    <a href="../SNMP-Trap-Handler/">SNMP Trap Handler</a>
</li>

                        
                            
<li >
    <a href="../Services/">Services</a>
</li>

                        
                            
<li >
    <a href="../Smokeping/">Smokeping</a>
</li>

                        
                            
<li >
    <a href="../Sub-Directory/">Sub Directory</a>
</li>

                        
                            
<li >
    <a href="../Syslog/">Syslog</a>
</li>

                        
                            
<li >
    <a href="../Two-Factor-Auth/">Two Factor Auth</a>
</li>

                        
                            
<li >
    <a href="../Varnish/">Varnish</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">General <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../General/Acknowledgement/">Acknowledgement</a>
</li>

                        
                            
<li >
    <a href="../../General/Callback-Stats-and-Privacy/">Callback Stats and Privacy</a>
</li>

                        
                            
<li >
    <a href="../../General/Changelog/">Changelog</a>
</li>

                        
                            
<li >
    <a href="../../General/Contributing/">Contributing</a>
</li>

                        
                            
<li >
    <a href="../../General/Credits/">Credits</a>
</li>

                        
                            
<li >
    <a href="../../General/Updating/">Updating</a>
</li>

                        
                            
<li >
    <a href="../../General/Welcome-to-Observium-users/">Welcome to Observium users</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Installation <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../Installation/CentOS-image/">CentOS image</a>
</li>

                        
                            
<li >
    <a href="../../Installation/Installation-CentOS-6-Apache-Nginx/">Installation CentOS 6 Apache Nginx</a>
</li>

                        
                            
<li >
    <a href="../../Installation/Installation-CentOS-7-Apache/">Installation CentOS 7 Apache</a>
</li>

                        
                            
<li >
    <a href="../../Installation/Installation-CentOS-7-Nginx/">Installation CentOS 7 Nginx</a>
</li>

                        
                            
<li >
    <a href="../../Installation/Installation-Ubuntu-1404-Apache/">Installation Ubuntu 1404 Apache</a>
</li>

                        
                            
<li >
    <a href="../../Installation/Installation-Ubuntu-1404-Lighttpd/">Installation Ubuntu 1404 Lighttpd</a>
</li>

                        
                            
<li >
    <a href="../../Installation/Installation-Ubuntu-1404-Nginx/">Installation Ubuntu 1404 Nginx</a>
</li>

                        
                            
<li >
    <a href="../../Installation/Installation-Ubuntu-1604-Apache/">Installation Ubuntu 1604 Apache</a>
</li>

                        
                            
<li >
    <a href="../../Installation/Installation-Ubuntu-1604-Nginx/">Installation Ubuntu 1604 Nginx</a>
</li>

                        
                            
<li >
    <a href="../../Installation/Installing-LibreNMS/">Installing LibreNMS</a>
</li>

                        
                            
<li >
    <a href="../../Installation/Migrating-from-Observium/">Migrating from Observium</a>
</li>

                        
                            
<li >
    <a href="../../Installation/Ubuntu-image/">Ubuntu image</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Support <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../Support/Configuration/">Configuration</a>
</li>

                        
                            
<li >
    <a href="../../Support/Discovery Support/">Discovery Support</a>
</li>

                        
                            
<li >
    <a href="../../Support/FAQ/">FAQ</a>
</li>

                        
                            
<li >
    <a href="../../Support/Features/">Features</a>
</li>

                        
                            
<li >
    <a href="../../Support/Install Validation/">Install Validation</a>
</li>

                        
                            
<li >
    <a href="../../Support/Performance/">Performance</a>
</li>

                        
                            
<li >
    <a href="../../Support/Poller Support/">Poller Support</a>
</li>

                        
                            
<li >
    <a href="../../Support/Support-New-OS/">Support New OS</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                
                    <li>
                        <a href="https://github.com/librenms/librenms">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#authentication-modules">Authentication modules</a></li>
        
            <li><a href="#available-authentication-modules">Available authentication modules</a></li>
        
            <li><a href="#user-levels">User levels</a></li>
        
            <li><a href="#enable-authentication-module">Enable authentication module</a></li>
        
            <li><a href="#mysql-authentication">MySQL Authentication</a></li>
        
            <li><a href="#http-authentication">HTTP Authentication</a></li>
        
            <li><a href="#ldap-authentication">LDAP Authentication</a></li>
        
            <li><a href="#http-authentication-ldap-authorization">HTTP Authentication / LDAP Authorization</a></li>
        
            <li><a href="#active-directory-authentication">Active Directory Authentication</a></li>
        
            <li><a href="#radius-authentication">Radius Authentication</a></li>
        
            <li><a href="#http-authentication-ad-authorization">HTTP Authentication / AD Authorization</a></li>
        
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="authentication-modules">Authentication modules</h1>
<p>LibreNMS supports multiple authentication modules along with <a href="http://docs.librenms.org/Extensions/Two-Factor-Auth/">Two Factor Auth</a>.
Here we will provide configuration details for these modules.</p>
<h4 id="available-authentication-modules">Available authentication modules</h4>
<ul>
<li>
<p>MySQL: mysql</p>
</li>
<li>
<p>LDAP: ldap</p>
</li>
<li>
<p>Active Directory: active_directory</p>
</li>
<li>
<p>HTTP Auth: http-auth</p>
</li>
<li>
<p>Radius: radius</p>
</li>
</ul>
<h4 id="user-levels">User levels</h4>
<ul>
<li>
<p>1: Normal User. You will need to assign device / port permissions for users at this level.</p>
</li>
<li>
<p>5: Global Read.</p>
</li>
<li>
<p>10: This is a global read/write admin account</p>
</li>
<li>
<p>11: Demo Account. Provides full read/write with certain restrictions (i.e can't delete devices).</p>
</li>
</ul>
<h4 id="enable-authentication-module">Enable authentication module</h4>
<p>To enable a particular authentication module you need to set this up in config.php.</p>
<pre><code class="php">$config['auth_mechanism'] = &quot;mysql&quot;;
</code></pre>

<h4 id="mysql-authentication">MySQL Authentication</h4>
<p>Config option: <code>mysql</code></p>
<p>This is default option with LibreNMS so you should have already got the configuration setup.</p>
<pre><code class="php">$config['db_host'] = &quot;HOSTNAME&quot;;
$config['db_user'] = &quot;DBUSER&quot;;
$config['db_pass'] = &quot;DBPASS&quot;;
$config['db_name'] = &quot;DBNAME&quot;;
</code></pre>

<h4 id="http-authentication">HTTP Authentication</h4>
<p>Config option: <code>http-auth</code></p>
<p>LibreNMS will expect the user to have authenticated via your webservice already. At this stage it will need to assign a
userlevel for that user which is done in one of two ways:</p>
<ul>
<li>
<p>A user exists in MySQL still where the usernames match up.</p>
</li>
<li>
<p>A global guest user (which still needs to be added into MySQL:
<pre><code class="php">$config['http_auth_guest'] = &quot;guest&quot;;
</code></pre>
This will then assign the userlevel for guest to all authenticated users.</p>
</li>
</ul>
<h4 id="ldap-authentication">LDAP Authentication</h4>
<p>Config option: <code>ldap</code></p>
<p>This one is a little more complicated :)</p>
<p>First of all, install <strong><em>php-ldap</em></strong> for CentOS/RHEL or <strong><em>php5-ldap</em></strong> for Ubuntu/Debian.</p>
<pre><code class="php">$config['auth_ldap_version'] = 3; # v2 or v3
$config['auth_ldap_server'] = &quot;ldap.example.com&quot;;
$config['auth_ldap_port']   = 389;
$config['auth_ldap_prefix'] = &quot;uid=&quot;;
$config['auth_ldap_suffix'] = &quot;,ou=People,dc=example,dc=com&quot;;
$config['auth_ldap_group']  = &quot;cn=groupname,ou=groups,dc=example,dc=com&quot;;

$config['auth_ldap_groupbase'] = &quot;ou=group,dc=example,dc=com&quot;;
$config['auth_ldap_groups']['admin']['level'] = 10;
$config['auth_ldap_groups']['pfy']['level'] = 7;
$config['auth_ldap_groups']['support']['level'] = 1;
$config['auth_ldap_groupmemberattr'] = &quot;memberUid&quot;;
</code></pre>

<p>Typically auth_ldap_suffix, auth_ldap_group, auth_ldap_groupbase, auth_ldap_groups are what's required to be configured.</p>
<p>An example config setup for use with Jumpcloud LDAP as a service is:</p>
<pre><code class="php">$config['auth_mechanism'] = &quot;ldap&quot;; # default, other options: ldap, http-auth
unset($config['auth_ldap_group']);
unset($config['auth_ldap_groups']);
$config['auth_ldap_groups']['librenms']['level'] = 10;
$config['auth_ldap_version'] = 3; # v2 or v3
$config['auth_ldap_server'] = &quot;ldap.jumpcloud.com&quot;;
$config['auth_ldap_port'] = 389;
$config['auth_ldap_prefix'] = &quot;uid=&quot;;
$config['auth_ldap_suffix'] = &quot;,ou=Users,o={id},dc=jumpcloud,dc=com&quot;;
$config['auth_ldap_groupbase'] = &quot;cn=librenms,ou=Users,o={id},dc=jumpcloud,dc=com&quot;;
$config['auth_ldap_groupmemberattr'] = &quot;memberUid&quot;;
</code></pre>

<p>Replace {id} with the unique ID provided by Jumpcloud.</p>
<h4 id="http-authentication-ldap-authorization">HTTP Authentication / LDAP Authorization</h4>
<p>Config option: <code>ldap-authorization</code></p>
<p>This module is a combination of <strong><em>http-auth</em></strong> and <strong><em>ldap</em></strong></p>
<p>LibreNMS will expect the user to have authenticated via your webservice already (e.g. using Kerberos Authentication in Apache) but will use LDAP to determine and assign the userlevel of a user.
The userlevel will be calculated by using LDAP group membership information as the <strong><em>ldap</em></strong> module does.</p>
<p>The configuration is the same as for the <strong><em>ldap</em></strong> module with one extra option: auth_ldap_cache_ttl.
This option allows to control how long user information (user_exists, userid, userlevel) are cached within the PHP Session.
The default value is 300 seconds.
To disabled this caching (highly discourage) set this option to 0.</p>
<pre><code class="php">$config['auth_ldap_cache_ttl'] = 300;
</code></pre>

<h4 id="active-directory-authentication">Active Directory Authentication</h4>
<p>Config option: <code>active_directory</code></p>
<p>This is similar to LDAP Authentication. Install <strong>php_ldap</strong> for CentOS/RHEL or <strong>php5-ldap</strong> for Debian/Ubuntu.</p>
<p>If you have issues with secure LDAP try setting <code>$config['auth_ad_check_certificates']</code> to <code>0</code>.</p>
<h5 id="require-actual-membership-of-the-configured-groups">Require actual membership of the configured groups</h5>
<p>If you set <code>$config['auth_ad_require_groupmembership']</code> to 1, the authenticated user has to be a member of the specific group. Otherwise all users can authenticate, but are limited to user level 0 and only have access to shared dashboards.</p>
<blockquote>
<p>Cleanup of old accounts is done using the authlog. You will need to set the cleanup date for when old accounts will be purged which will happen AUTOMATICALLY.
Please ensure that you set the $config['authlog_purge'] value to be greater than $config['active_directory]['users_purge'] otherwise old users won't be removed.</p>
</blockquote>
<h5 id="sample-configuration">Sample configuration</h5>
<pre><code>$config['auth_ad_url']                      = &quot;ldaps://your-domain.controll.er&quot;;
$config['auth_ad_check_certificates']       = 1; // or 0
$config['auth_ad_domain']                   = &quot;your-domain.com&quot;;
$config['auth_ad_base_dn']                  = &quot;dc=your-domain,dc=com&quot;;
$config['auth_ad_groups']['&lt;ad-admingroup&gt;']['level'] = 10;
$config['auth_ad_groups']['&lt;ad-usergroup&gt;']['level']   = 7;
$config['auth_ad_require_groupmembership']  = 0;
$config['active_directory']['users_purge']  = 14;//Purge users who haven't logged in for 14 days.
</code></pre>

<p>Replace <code>&lt;ad-admingroup&gt;</code> with your Active Directory admin-user group and <code>&lt;ad-usergroup&gt;</code> with your standard user group.</p>
<h4 id="radius-authentication">Radius Authentication</h4>
<p>Please note that a mysql user is created for each user the logs in successfully. User level 1 is assigned to those accounts so you will then need to assign the relevant permissions unless you set <code>$config['radius']['userlevel']</code> to be something other than 1.</p>
<blockquote>
<p>Cleanup of old accounts is done using the authlog. You will need to set the cleanup date for when old accounts will be purged which will happen AUTOMATICALLY.
Please ensure that you set the $config['authlog_purge'] value to be greater than $config['radius']['users_purge'] otherwise old users won't be removed.</p>
</blockquote>
<pre><code class="php">$config['radius']['hostname']   = 'localhost';
$config['radius']['port']       = '1812';
$config['radius']['secret']     = 'testing123';
$config['radius']['timeout']    = 3;
$config['radius']['users_purge'] = 14;//Purge users who haven't logged in for 14 days.
$config['radius']['default_level'] = 1;//Set the default user level when automatically creating a user.
</code></pre>

<h4 id="http-authentication-ad-authorization">HTTP Authentication / AD Authorization</h4>
<p>Config option: <code>ad-authorization</code></p>
<p>This module is a combination of <strong><em>http-auth</em></strong> and <strong><em>active</em>directory</strong>_</p>
<p>LibreNMS will expect the user to have authenticated via your webservice already (e.g. using Kerberos Authentication in Apache) but will use Active Directory lookups to determine and assign the userlevel of a user.
The userlevel will be calculated by using AD group membership information as the <strong><em>active</em>directory</strong>_ module does.</p>
<p>The configuration is the same as for the <strong><em>active</em>directory</strong>_ module with two extra, optional options: auth_ad_binduser and auth_ad_bindpassword.
These should be set to a AD user with read capabilities in your AD Domain in order to be able to perform searches. 
If these options are omitted, the module will attempt an anonymous bind (which then of course must be allowed by your Active Directory server(s)).</p>
<p>There is also one extra option for controlling user information caching: auth_ldap_cache_ttl.
This option allows to control how long user information (user_exists, userid, userlevel) are cached within the PHP Session.
The default value is 300 seconds.
To disable this caching (highly discourage) set this option to 0.</p>
<pre><code class="php">$config['auth_ad_binduser']     = &quot;ad_binduser&quot;;
$config['auth_ad_bindpassword'] = &quot;ad_bindpassword&quot;;
$config['auth_ldap_cache_ttl']  = 300;
</code></pre></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script>var base_url = '../..';</script>
        <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
        <script src="../../js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>

    </body>
</html>
