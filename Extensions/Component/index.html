<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="LibreNMS">
        <link rel="canonical" href="http://docs.librenms.org/Extensions/Component/">
        <link rel="shortcut icon" href="../../img/favicon.ico">

	    <title>Component - LibreNMS Docs</title>

        <link href="../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.6.3.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link href="../../css/color.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <link href="../../librenms.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-79149977-2', 'docs.librenms.org');
            ga('send', 'pageview');
        </script>
        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../..">LibreNMS Docs</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../..">Home</a>
                    </li>
                
                
                
                    <li id="dropdown-Installation" class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Installation <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../Installation/Installing-LibreNMS/">Installing LibreNMS</a>
</li>

                        
                            
<li >
    <a href="../../Installation/Ubuntu-image/">Ubuntu VM Image</a>
</li>

                        
                            
<li >
    <a href="../../Installation/CentOS-image/">CentOS VM Image</a>
</li>

                        
                            
<li >
    <a href="../../Installation/Installation-Ubuntu-1604-Nginx/">Ubuntu 16.04 (Nginx)</a>
</li>

                        
                            
<li >
    <a href="../../Installation/Installation-Ubuntu-1604-Apache/">Ubuntu 16.04 (Apache)</a>
</li>

                        
                            
<li >
    <a href="../../Installation/Installation-CentOS-7-Nginx/">CentOS 7 (Nginx)</a>
</li>

                        
                            
<li >
    <a href="../../Installation/Installation-CentOS-7-Apache/">CentOS 7 (Apache)</a>
</li>

                        
                            
<li >
    <a href="../../Installation/Installing-LibreNMS/">Older Docs</a>
</li>

                        
                            
<li >
    <a href="../../Installation/Migrating-from-Observium/">Migrating from Observium</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li id="dropdown-General" class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">General <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../General/Acknowledgement/">Acknowledgement</a>
</li>

                        
                            
<li >
    <a href="../../General/Callback-Stats-and-Privacy/">Callback Stats and Privacy</a>
</li>

                        
                            
<li >
    <a href="../../General/Changelog/">Changelog</a>
</li>

                        
                            
<li >
    <a href="../../General/Contributing/">Contributing</a>
</li>

                        
                            
<li >
    <a href="../../General/Credits/">Credits</a>
</li>

                        
                            
<li >
    <a href="../../General/Updating/">Updating</a>
</li>

                        
                            
<li >
    <a href="../../General/Releases/">Releases</a>
</li>

                        
                            
<li >
    <a href="../../General/Security/">Security</a>
</li>

                        
                            
<li >
    <a href="../../General/Welcome-to-Observium-users/">Welcome to Observium users</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li id="dropdown-Extensions" class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Extensions <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../Alerting/">Alerting</a>
</li>

                        
                            
<li >
    <a href="../Applications/">Applications</a>
</li>

                        
                            
<li >
    <a href="../Authentication/">Authentication</a>
</li>

                        
                            
<li >
    <a href="../Auto-Discovery/">Auto Discovery</a>
</li>

                        
                            
<li >
    <a href="../Billing-Module/">Billing Module</a>
</li>

                        
                            
<li class="active">
    <a href="./">Component</a>
</li>

                        
                            
<li >
    <a href="../Dell-OpenManage/">Dell OpenManage</a>
</li>

                        
                            
<li >
    <a href="../Device-Groups/">Device Groups</a>
</li>

                        
                            
<li >
    <a href="../Distributed-Poller/">Distributed Poller</a>
</li>

                        
                            
<li >
    <a href="../Email-Alerting/">Email Alerting</a>
</li>

                        
                            
<li >
    <a href="../Globe-Frontpage/">Globe Frontpage</a>
</li>

                        
                            
<li >
    <a href="../Graylog/">Graylog</a>
</li>

                        
                            
<li >
    <a href="../Graphite/">Graphite</a>
</li>

                        
                            
<li >
    <a href="../IRC-Bot/">IRC Bot</a>
</li>

                        
                            
<li >
    <a href="../IRC-Bot-Extensions/">IRC Bot Extensions</a>
</li>

                        
                            
<li >
    <a href="../InfluxDB/">InfluxDB</a>
</li>

                        
                            
<li >
    <a href="../Interface-Description-Parsing/">Interface Description Parsing</a>
</li>

                        
                            
<li >
    <a href="../MIB-based-polling/">MIB based polling</a>
</li>

                        
                            
<li >
    <a href="../Memcached/">Memcached</a>
</li>

                        
                            
<li >
    <a href="../Network-Map/">Network Map</a>
</li>

                        
                            
<li >
    <a href="../NFSen/">NFSen</a>
</li>

                        
                            
<li >
    <a href="../Oxidized/">Oxidized</a>
</li>

                        
                            
<li >
    <a href="../PeeringDB/">PeeringDB</a>
</li>

                        
                            
<li >
    <a href="../Plugin-System/">Plugin System</a>
</li>

                        
                            
<li >
    <a href="../Poller-Service/">Poller Service</a>
</li>

                        
                            
<li >
    <a href="../Port-Description-Parser/">Port Description Parser</a>
</li>

                        
                            
<li >
    <a href="../Proxmox/">Proxmox</a>
</li>

                        
                            
<li >
    <a href="../RRDCached/">RRDCached</a>
</li>

                        
                            
<li >
    <a href="../RRDTune/">RRDTune</a>
</li>

                        
                            
<li >
    <a href="../SNMP-Proxy/">SNMP Proxy</a>
</li>

                        
                            
<li >
    <a href="../SNMP-Trap-Handler/">SNMP Trap Handler</a>
</li>

                        
                            
<li >
    <a href="../Services/">Services</a>
</li>

                        
                            
<li >
    <a href="../Smokeping/">Smokeping</a>
</li>

                        
                            
<li >
    <a href="../Sub-Directory/">Sub Directory</a>
</li>

                        
                            
<li >
    <a href="../Syslog/">Syslog</a>
</li>

                        
                            
<li >
    <a href="../Two-Factor-Auth/">Two Factor Auth</a>
</li>

                        
                            
<li >
    <a href="../Varnish/">Varnish</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li id="dropdown-Developing" class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Developing <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../Developing/Using-Git/">Using Git</a>
</li>

                        
                            
<li >
    <a href="../../Developing/Code-Guidelines/">Code Guidelines</a>
</li>

                        
                            
<li >
    <a href="../../Developing/Style-Guidelines/">Style Guidelines</a>
</li>

                        
                            
<li >
    <a href="../../Developing/Validating-Code/">Validating Code</a>
</li>

                        
                            
<li >
    <a href="../../Developing/Code-Structure/">Code Structure</a>
</li>

                        
                            
<li >
    <a href="../../Developing/Creating-Documentation/">Creating Documentation</a>
</li>

                        
                            
<li >
    <a href="../../Developing/Support-New-OS/">Support New OS</a>
</li>

                        
                            
<li >
    <a href="../../Developing/Dynamic-Config/">Dynamic Config</a>
</li>

                        
                            
<li >
    <a href="../../Developing/Sensor-State-Support/">Sensor State Support</a>
</li>

                        
                            
<li >
    <a href="../../Developing/Merging-Pull-Requests/">Merging Pull Requests</a>
</li>

                        
                            
<li >
    <a href="../../Developing/Creating-Release/">Creating Release</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li >
                        <a href="../../API/API-Docs/">API</a>
                    </li>
                
                
                
                    <li id="dropdown-Support" class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Support <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../Support/1-Minute-Polling/">1 Minute Polling</a>
</li>

                        
                            
<li >
    <a href="../../Support/Configuration/">Configuration</a>
</li>

                        
                            
<li >
    <a href="../../Support/Discovery Support/">Discovery Support</a>
</li>

                        
                            
<li >
    <a href="../../Support/Example-Hardware-Setup/">Example Hardware Setup</a>
</li>

                        
                            
<li >
    <a href="../../Support/FAQ/">FAQ</a>
</li>

                        
                            
<li >
    <a href="../../Support/Features/">Features</a>
</li>

                        
                            
<li >
    <a href="../../Support/Install Validation/">Install Validation</a>
</li>

                        
                            
<li >
    <a href="../../Support/Performance/">Performance</a>
</li>

                        
                            
<li >
    <a href="../../Support/Poller Support/">Poller Support</a>
</li>

                        
                            
<li >
    <a href="../../Support/Remote-Monitoring-VPN/">Remote Monitoring VPN</a>
</li>

                        
                            
<li >
    <a href="../../Support/SNMP-Configuration-Examples/">SNMP Configuration Examples</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li id="dropdown-hidden" class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">hidden <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../Installation/Installation-Ubuntu-1404-Nginx/">Ubuntu 14.04 (Nginx)</a>
</li>

                        
                            
<li >
    <a href="../../Installation/Installation-Ubuntu-1404-Apache/">Ubuntu 14.04 (Apache)</a>
</li>

                        
                            
<li >
    <a href="../../Installation/Installation-Ubuntu-1404-Lighttpd/">Ubuntu 14.04 (Lighttpd)</a>
</li>

                        
                            
<li >
    <a href="../../Installation/Installation-CentOS-6-Apache-Nginx/">CentOS 6 (Apache/Nginx)</a>
</li>

                        
                            
<li >
    <a href="../../Installation/Installation-(Debian-Ubuntu)/">Installation (Debian Ubuntu)</a>
</li>

                        
                            
<li >
    <a href="../../Installation/Installation-(RHEL-CentOS)/">Installation (RHEL CentOS)</a>
</li>

                        
                            
<li >
    <a href="../../Support/Support-New-OS/">Support New OS</a>
</li>

                        
                            
<li >
    <a href="../Agent-Setup/">Agent Setup</a>
</li>

                        
                            
<li >
    <a href="../RRDCached-Security/">RRDCached Security</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i>
                        <span class="visible-xs-inline visible-md-inline visible-lg-inline">Search</span>
                    </a>
                </li>
                
                
                    <li>
                        <a href="https://github.com/librenms/librenms">
                            
                                <i class="fa fa-github"></i>
                            
                            <span class="visible-xs-inline visible-lg-inline">GitHub</span>
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="row">
            
                
                    <div class="col-md-3">
<div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#about">About</a></li>
        
    
        <li class="main "><a href="#database-structure">Database Structure</a></li>
        
            <li><a href="#reserved-fields">Reserved Fields</a></li>
        
    
        <li class="main "><a href="#using-components">Using Components</a></li>
        
            <li><a href="#retrieving-components">Retrieving Components</a></li>
        
            <li><a href="#creating-components">Creating Components</a></li>
        
            <li><a href="#deleting-components">Deleting Components</a></li>
        
            <li><a href="#editing-components">Editing Components</a></li>
        
            <li><a href="#api">API</a></li>
        
            <li><a href="#alerting">Alerting</a></li>
        
    
        <li class="main "><a href="#example-code">Example Code</a></li>
        
    
    </ul>
</div>
</div>
                    <div class="col-md-9" role="main">
<div class="row">
  <div class="source-links col-md-offset-8 col-md-4">

    <a href="https://github.com/librenms/librenms/edit/master/doc/Extensions/Component.md" target="_blank"><i class="fa fa-pencil"></i> Edit on GitHub</a>

  </div>
</div>


<p>Table of Content:</p>
<ul>
<li><a href="#about">About</a></li>
<li><a href="#database">Database Structure</a><ul>
<li><a href="#reserved">Reserved Fields</a></li>
</ul>
</li>
<li><a href="#using">Using Components</a><ul>
<li><a href="#get">Getting Current Components</a><ul>
<li><a href="#options">Options</a><ul>
<li><a href="#filter">Filtering Results</a></li>
<li><a href="#sort">Sorting Results</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#create">Creating Components</a></li>
<li><a href="#delete">Deleting Components</a></li>
<li><a href="#update">Editing Components</a><ul>
<li><a href="#update-edit">Edit the Array</a></li>
<li><a href="#update-write">Writing the Components</a></li>
</ul>
</li>
<li><a href="#api">API</a></li>
<li><a href="#alert">Alerting</a></li>
</ul>
</li>
<li><a href="#example">Example Code</a></li>
</ul>
<h1 id="about"><a name="about">About</a></h1>
<p>The Component extension provides a generic database storage mechanism for discovery and poller modules.
The Driver behind this extension was to provide the features of ports, in a generic manner to discovery/poller modules.</p>
<p>It provides a status (Nagios convention), the ability to Disable (do not poll), or Ignore (do not Alert).</p>
<h1 id="database-structure"><a name="database">Database Structure</a></h1>
<p>The database structure contains the component table:</p>
<pre><code class="SQL">mysql&gt; select * from component limit 1;
+----+-----------+------+------------+--------+----------+--------+-------+
| id | device_id | type | label      | status | disabled | ignore | error |
+----+-----------+------+------------+--------+----------+--------+-------+
|  9 |         1 | TEST | TEST LABEL |      0 |        1 |      1 |       |
+----+-----------+------+------------+--------+----------+--------+-------+
1 row in set (0.00 sec)
</code></pre>

<p>These fields are described below:</p>
<ul>
<li>id - ID for each component, unique index</li>
<li>device_id - device_id from the devices table</li>
<li>type - name from the component_type table</li>
<li>label - Display label for the component</li>
<li>status - The status of the component, retrieved from the device</li>
<li>disabled - Should this component be polled?</li>
<li>ignore - Should this component be alerted on</li>
<li>error - Error message if in Alert state</li>
</ul>
<p>The component_prefs table holds custom data in an Attribute/Value format:</p>
<pre><code class="SQL">mysql&gt; select * from component_prefs limit 1;
+----+-----------+-----------+-----------+
| id | component | attribute | value     |
+----+-----------+-----------+-----------+
|  4 |         9 | TEST_ATTR | TEST_ATTR |
+----+-----------+-----------+-----------+
2 rows in set (0.00 sec)
</code></pre>

<h2 id="reserved-fields"><a name="reserved">Reserved Fields</a></h2>
<p>When this data from both the component and component_prefs tables is returned in one single consolidated array, there is the potential for someone to attempt to set an attribute (in the component_prefs) table that is used in the components table.
Because of this all fields of the component table are reserved, they cannot be used as custom attributes, if you update these the module will attempt to write them to the component table, not the component_prefs table.</p>
<h1 id="using-components"><a name="using">Using Components</a></h1>
<p>Create an instance of the component class:</p>
<pre><code class="php">$COMPONENT = new LibreNMS\Component();
</code></pre>

<h2 id="retrieving-components"><a name="get">Retrieving Components</a></h2>
<p>Now you can retrieve an array of the available components:</p>
<pre><code class="php">$ARRAY = $COMPONENT-&gt;getComponents($DEVICE_ID,$OPTIONS);
</code></pre>

<p><code>getComponents</code> takes 2 arguments:</p>
<ul>
<li>DEVICE_ID or null for all devices.</li>
<li>OPTIONS - an array of various options.</li>
</ul>
<p><code>getComponents</code> will return an array containing components in the following format:</p>
<pre><code>Array
(
    [X] =&gt; Array
    (
        [Y1] =&gt; Array
        (
            [device_id] =&gt; 1
            [TEST_ATTR] =&gt; TEST_ATTR
            [type] =&gt; TEST
            [label] =&gt; TEST LABEL
            [status] =&gt; 0
            [ignore] =&gt; 1
            [disabled] =&gt; 1
            [error] =&gt;
        ),
        [Y2] =&gt; Array
        (
            [device_id] =&gt; 1
            [TEST_ATTR] =&gt; TEST_ATTR
            [type] =&gt; TESTING
            [label] =&gt; TEST LABEL
            [status] =&gt; 0
            [ignore] =&gt; 1
            [disabled] =&gt; 0
            [error] =&gt;
        ),
    )
)
</code></pre>
<p>Where X is the Device ID and Y1/Y2 is the Component ID. In the example above, 'TEST_ATTR' is a custom field, the rest are reserved fields.</p>
<h3 id="options"><a name="options">Options</a></h3>
<p>Options can be supplied to <code>getComponents</code> to influence which and how components are returned.</p>
<h4 id="filtering"><a name="filter">Filtering</a></h4>
<p>You can filter on any of the <a href="#reserved">reserved</a> fields. Filters are created in the following format:</p>
<pre><code class="php">$options['filter']['FIELD'] = array ('OPERATOR', 'CRITERIA');
</code></pre>

<p>Where:</p>
<ul>
<li>FIELD - The <a href="#reserved">reserved</a> field to filter on</li>
<li>OPERATOR - 'LIKE' or '=', are we checking if the FIELD equals or contains the CRITERIA.</li>
<li>CRITERIA - The criteria to search on</li>
</ul>
<p>There are 2 filtering shortcuts:</p>
<p>$DEVICE_ID is a synonym for:</p>
<pre><code class="php">$OPTIONS['filter']['device_id'] = array ('=', $DEVICE_ID);
</code></pre>

<p><code>$OPTIONS['type'] = $TYPE</code> is a synonym for:</p>
<pre><code class="php">$OPTIONS['filter']['type'] = array ('=', $TYPE);
</code></pre>

<h4 id="sorting"><a name="sort">Sorting</a></h4>
<p>You can sort the records that are returned by specifying the following option:</p>
<pre><code class="php">$OPTIONS['sort'][FIELD] = 'DIRECTION';
</code></pre>

<p>Where Direction is one of:</p>
<ul>
<li>ASC - Ascending, from Low to High</li>
<li>DESC - Descending, from High to Low</li>
</ul>
<h2 id="creating-components"><a name="creating">Creating Components</a></h2>
<p>To create a new component, run the createComponent function.</p>
<pre><code class="php">$ARRAY = $COMPONENT-&gt;createComponent($DEVICE_ID,$TYPE);
</code></pre>

<p><code>createComponent</code> takes 2 arguments:</p>
<ul>
<li>DEVICE_ID - The ID of the device to attach the component to.</li>
<li>TYPE - The unique type for your module.</li>
</ul>
<p>This will return a new, empty array with a component ID and Type set, all other fields will be set to defaults.</p>
<pre><code>Array
(
    [1] =&gt; Array
    (
        [type] =&gt; TESTING
        [label] =&gt;
        [status] =&gt; 1
        [ignore] =&gt; 0
        [disabled] =&gt; 0
        [error] =&gt;
    )
)
</code></pre>
<h2 id="deleting-components"><a name="delete">Deleting Components</a></h2>
<p>When a component is no longer needed, it can be deleted.</p>
<pre><code class="php">$COMPONENT-&gt;deleteComponent($COMPONENT_ID)
</code></pre>

<p>This will return True on success or False on failure.</p>
<h2 id="editing-components"><a name="update">Editing Components</a></h2>
<p>To edit a component, the procedure is:</p>
<ol>
<li><a href="#get">Get the Current Components</a></li>
<li><a href="#update-edit">Edit the array</a></li>
<li><a href="#update-write">Write the components</a></li>
</ol>
<h3 id="edit-the-array"><a name="update-edit">Edit the Array</a></h3>
<p>Once you have a component array from getComponents the first thing to do is extract the components for only the single device you are editing. This is required because the setComponentPrefs function only saves a single device at a time.</p>
<pre><code class="php">$ARRAY = $COMPONENT-&gt;getComponents($DEVICE_ID,$OPTIONS);
$ARRAY = $ARRAY[$DEVICE_ID];
</code></pre>

<p>Then simply edit this array to suit your needs.
If you need to add a new Attribute/Value pair you can:</p>
<pre><code class="php">$ARRAY[COMPONENT_ID]['New Attribute'] = 'Value';
</code></pre>

<p>If you need to delete a previously set Attribute/Value pair you can:</p>
<pre><code class="php">unset($ARRAY[COMPONENT_ID]['New Attribute']);
</code></pre>

<p>If you need to edit a previously set Attribute/Value pair you can:</p>
<pre><code class="php">$ARRAY[COMPONENT_ID]['Existing Attribute'] = &quot;New Value&quot;;
</code></pre>

<h3 id="write-the-components"><a name="update-write">Write the components</a></h3>
<p>To write component changes back to the database simply:</p>
<pre><code class="php">$COMPONENT-&gt;setComponentPrefs($DEVICE_ID,$ARRAY)
</code></pre>

<p>When writing the component array there are several caveats to be aware of, these are:</p>
<ul>
<li>$ARRAY must be in the format of a single device ID - <code>$ARRAY[$COMPONENT_ID][Attribute] = 'Value';</code> NOT in the multi device format returned by getComponents - $ARRAY[$DEVICE_ID][$COMPONENT_ID][Attribute] = 'Value';`</li>
<li>You cannot edit the Component ID or the Device ID</li>
<li><a href="#reserved">reserved</a> fields can not be removed</li>
<li>if a change is found an entry will be written to the eventlog.</li>
</ul>
<h2 id="api"><a name="api">API</a></h2>
<p>Component details are available via the API.
Please see the <a href="http://docs.librenms.org/API/API-Docs/#api-route-25">API-Docs</a> for details.</p>
<h2 id="alerting"><a name="alert">Alerting</a></h2>
<p>It is intended that discovery/poller modules will detect the status of a component during the polling cycle.
Status is logged using the Nagios convention for status codes, where:
    0 = Ok,
    1 = Warning,
    2 = Critical</p>
<p>If you are creating a poller module which can detect a fault condition simply set STATUS to something other than 0 and ERROR to a message that indicates the problem.</p>
<p>To actually raise an alert, the user will need to create an alert rule. To assist with this several Alerting Macro's have been created:</p>
<ul>
<li><code>%macro.component_normal</code> - A component that is not disabled or ignored and in a Normal state.</li>
<li><code>%macro.component_warning</code> - A component that is not disabled or ignored and NOT in a Warning state.</li>
<li><code>%macro.component_critical</code> - A component that is not disabled or ignored and NOT in a Critical state.</li>
</ul>
<p>To raise alerts for components, the following rules could be created:</p>
<ul>
<li><code>%macros.component_critical = "1"</code> - To alert on all Critical components</li>
<li><code>%macros.component_critical = "1" &amp;&amp; %component.type = "&lt;Type of Component&gt;"</code> - To alert on all Critical components of a particular type.</li>
</ul>
<p>If there is a particular component you would like excluded from alerting, simply set the ignore field to 1.</p>
<p>The data that is written to each alert when it is raised is in the following format:</p>
<p><code>COMPONENT_TYPE - LABEL - ERROR</code></p>
<h1 id="example-code"><a name="examples">Example Code</a></h1>
<p>To see an example of how the component module can used, please see the following modules:</p>
<ul>
<li>Cisco CBQoS<ul>
<li>includes/discovery/cisco-cbqos.inc.php</li>
<li>includes/polling/cisco-cbqos.inc.php</li>
<li>html/includes/graphs/device/cbqos_traffic.inc.php</li>
</ul>
</li>
<li>Cisco OTV<ul>
<li>includes/discovery/cisco-otv.inc.php</li>
<li>includes/polling/cisco-otv.inc.php</li>
<li>html/includes/graphs/device/cisco-otv-mac.inc.php</li>
<li>html/pages/routing/cisco-otv.inc.php</li>
</ul>
</li>
</ul></div>
                
            
            </div>
        </div>

        <footer>
            <div class="container">
                <hr>
                
                <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
            </div>
        </footer>

        <script src="../../js/jquery-1.12.4.min.js"></script>
        <script src="../../js/bootstrap-3.3.7.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script>var base_url = '../..';</script>
        <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
        <script src="../../js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>

    </body>
</html>
