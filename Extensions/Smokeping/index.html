



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="LibreNMS user and developer documentation">
      
      
        <link rel="canonical" href="http://docs.librenms.org/Extensions/Smokeping/">
      
      
        <meta name="author" content="LibreNMS">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.6.0">
    
    
      
        <title>Smokeping - LibreNMS Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.1b62728e.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.268332fc.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <link rel="stylesheet" href="../../librenms.css">
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-79149977-2", "docs.librenms.org")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#smokeping-integration" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://docs.librenms.org" title="LibreNMS Docs" class="md-header-nav__button md-logo">
          
            <img src="../../img/librenms.svg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              LibreNMS Docs
            </span>
            <span class="md-header-nav__topic">
              
                Smokeping
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/librenms/librenms/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="http://docs.librenms.org" title="LibreNMS Docs" class="md-nav__button md-logo">
      
        <img src="../../img/librenms.svg" width="48" height="48">
      
    </a>
    LibreNMS Docs
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/librenms/librenms/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      1. General
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        1. General
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../General/Acknowledgement/" title="Acknowledgements" class="md-nav__link">
      Acknowledgements
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../General/Changelog/" title="Changelog" class="md-nav__link">
      Changelog
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../General/CODE_OF_CONDUCT/" title="Code of Conduct" class="md-nav__link">
      Code of Conduct
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/Features/" title="Features" class="md-nav__link">
      Features
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../General/Welcome-to-Observium-users/" title="Welcome to Observium users" class="md-nav__link">
      Welcome to Observium users
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      2. Installing
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        2. Installing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Installation/" title="Installing LibreNMS" class="md-nav__link">
      Installing LibreNMS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Installation/Images/" title="LibreNMS VMs" class="md-nav__link">
      LibreNMS VMs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Installation/Installation-Ubuntu-1804-Nginx/" title="Ubuntu 18.04 (Nginx)" class="md-nav__link">
      Ubuntu 18.04 (Nginx)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Installation/Installation-Ubuntu-1804-Apache/" title="Ubuntu 18.04 (Apache)" class="md-nav__link">
      Ubuntu 18.04 (Apache)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Installation/Installation-CentOS-7-Nginx/" title="CentOS 7 (Nginx)" class="md-nav__link">
      CentOS 7 (Nginx)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Installation/Installation-CentOS-7-Apache/" title="CentOS 7 (Apache)" class="md-nav__link">
      CentOS 7 (Apache)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Installation/Migrating-from-Observium/" title="Migrating from Observium" class="md-nav__link">
      Migrating from Observium
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      3. Getting started
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        3. Getting started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../General/Releases/" title="Choosing a release" class="md-nav__link">
      Choosing a release
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/Adding-a-Device/" title="Adding a device" class="md-nav__link">
      Adding a device
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Device-Groups/" title="Grouping Devices" class="md-nav__link">
      Grouping Devices
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../General/Callback-Stats-and-Privacy/" title="Submitting stats" class="md-nav__link">
      Submitting stats
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../General/Updating/" title="Updating an install" class="md-nav__link">
      Updating an install
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      4. Basic Setup
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        4. Basic Setup
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Applications/" title="Applications" class="md-nav__link">
      Applications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Agent-Setup/" title="Check_MK Setup" class="md-nav__link">
      Check_MK Setup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Billing-Module/" title="Billing Module" class="md-nav__link">
      Billing Module
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Dell-OpenManage/" title="Dell OpenManage" class="md-nav__link">
      Dell OpenManage
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../World-Map/" title="World Map" class="md-nav__link">
      World Map
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Interface-Description-Parsing/" title="Interface Description Parsing" class="md-nav__link">
      Interface Description Parsing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Network-Map/" title="Network Map" class="md-nav__link">
      Network Map
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Syslog/" title="Syslog" class="md-nav__link">
      Syslog
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Dashboards/" title="Dashboards" class="md-nav__link">
      Dashboards
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      5. Advanced Setup
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        5. Advanced Setup
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/1-Minute-Polling/" title="1 Minute Polling" class="md-nav__link">
      1 Minute Polling
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Fast-Ping-Check/" title="Fast Ping Checking" class="md-nav__link">
      Fast Ping Checking
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/Environment-Variables/" title="Environment Variables" class="md-nav__link">
      Environment Variables
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/Configuration/" title="Configuration Docs" class="md-nav__link">
      Configuration Docs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Authentication/" title="Authentication Options" class="md-nav__link">
      Authentication Options
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Two-Factor-Auth/" title="Two-Factor Auth" class="md-nav__link">
      Two-Factor Auth
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Auto-Discovery/" title="Auto-discovery Setup" class="md-nav__link">
      Auto-discovery Setup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Distributed-Poller/" title="Scaling LibreNMS" class="md-nav__link">
      Scaling LibreNMS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../RRDCached/" title="RRDCached" class="md-nav__link">
      RRDCached
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Sub-Directory/" title="Sub-directory Support" class="md-nav__link">
      Sub-directory Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Varnish/" title="Varnish" class="md-nav__link">
      Varnish
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Dispatcher-Service/" title="Dispatcher Service (RC)" class="md-nav__link">
      Dispatcher Service (RC)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../RRDTune/" title="RRDTune" class="md-nav__link">
      RRDTune
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../IRC-Bot/" title="IRC Bot" class="md-nav__link">
      IRC Bot
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../IRC-Bot-Extensions/" title="IRC Bot Extensions" class="md-nav__link">
      IRC Bot Extensions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SNMP-Proxy/" title="SNMP Proxy" class="md-nav__link">
      SNMP Proxy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SNMP-Trap-Handler/" title="SNMP Trap Handler" class="md-nav__link">
      SNMP Trap Handler
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Customizing-the-Web-UI/" title="Customizing the Web UI" class="md-nav__link">
      Customizing the Web UI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/Cleanup-options/" title="Cleanup Options" class="md-nav__link">
      Cleanup Options
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7" checked>
    
    <label class="md-nav__link" for="nav-7">
      6. 3rd Party Integration
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        6. 3rd Party Integration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Gateone/" title="Gateone" class="md-nav__link">
      Gateone
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Graylog/" title="Graylog" class="md-nav__link">
      Graylog
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Services/" title="Nagios Plugins" class="md-nav__link">
      Nagios Plugins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../NFSen/" title="NFSen" class="md-nav__link">
      NFSen
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Oxidized/" title="Oxidized" class="md-nav__link">
      Oxidized
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Rancid/" title="Rancid" class="md-nav__link">
      Rancid
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../PeeringDB/" title="PeeringDB" class="md-nav__link">
      PeeringDB
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Proxmox/" title="Proxmox" class="md-nav__link">
      Proxmox
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-9" type="checkbox" id="nav-7-9">
    
    <label class="md-nav__link" for="nav-7-9">
      Storing Metrics
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="10">
      <label class="md-nav__title" for="nav-7-9">
        Storing Metrics
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Metric-Storage/" title="Intro" class="md-nav__link">
      Intro
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../metrics/Graphite/" title="Graphite" class="md-nav__link">
      Graphite
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../metrics/InfluxDB/" title="InfluxDB" class="md-nav__link">
      InfluxDB
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../metrics/OpenTSDB/" title="OpenTSDB" class="md-nav__link">
      OpenTSDB
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../metrics/Prometheus/" title="Prometheus" class="md-nav__link">
      Prometheus
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Smokeping
      </label>
    
    <a href="./" title="Smokeping" class="md-nav__link md-nav__link--active">
      Smokeping
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#new-smokeping-installation" class="md-nav__link">
    New Smokeping installation
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-and-integrate-smokeping-debianubuntu" class="md-nav__link">
    Install and integrate Smokeping - Debian/Ubuntu
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-smokeping" class="md-nav__link">
    Install Smokeping
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-smokeping" class="md-nav__link">
    Configure SmokePing
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configure-smokeping-to-use-librenms-list-of-nodes" class="md-nav__link">
    Configure Smokeping to use LibreNMS list of nodes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generate-librenms-list-of-smokeping-nodes" class="md-nav__link">
    Generate LibreNMS list of Smokeping Nodes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-librenms" class="md-nav__link">
    Configure LibreNMS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-web-server" class="md-nav__link">
    Configure web server
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#apache-configuration" class="md-nav__link">
    Apache Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx-configuration" class="md-nav__link">
    Nginx Configuration
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nginx-password-authentification" class="md-nav__link">
    Nginx Password Authentification
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#start-smokeping" class="md-nav__link">
    Start SmokePing
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verify-in-librenms" class="md-nav__link">
    Verify in LibreNMS
  </a>
  
</li>
      
      
        <li class="md-nav__item">
          <a href="#__source" class="md-nav__link md-nav__link--active">
            Source
          </a>
        </li>
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Weathermap/" title="Weathermap" class="md-nav__link">
      Weathermap
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      7. API
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        7. API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../API/" title="Using the API" class="md-nav__link">
      Using the API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../API/Devices/" title="Devices" class="md-nav__link">
      Devices
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../API/DeviceGroups/" title="DeviceGroups" class="md-nav__link">
      DeviceGroups
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../API/Ports/" title="Ports" class="md-nav__link">
      Ports
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../API/PortGroups/" title="PortGroups" class="md-nav__link">
      PortGroups
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../API/Alerts/" title="Alerts" class="md-nav__link">
      Alerts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../API/Routing/" title="Routing" class="md-nav__link">
      Routing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../API/Switching/" title="Switching" class="md-nav__link">
      Switching
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../API/Inventory/" title="Inventory" class="md-nav__link">
      Inventory
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../API/Bills/" title="Bills" class="md-nav__link">
      Bills
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../API/ARP/" title="ARP" class="md-nav__link">
      ARP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../API/Services/" title="Services" class="md-nav__link">
      Services
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../API/System/" title="System" class="md-nav__link">
      System
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../API/Logs/" title="Logs" class="md-nav__link">
      Logs
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      8. Alerting
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        8. Alerting
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Alerting/" title="Intro" class="md-nav__link">
      Intro
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Alerting/Introduction/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Alerting/Rules/" title="Rules" class="md-nav__link">
      Rules
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Alerting/Templates/" title="Templates" class="md-nav__link">
      Templates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Alerting/Transports/" title="Transports" class="md-nav__link">
      Transports
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Alerting/Creating-Transport/" title="Creating Transports" class="md-nav__link">
      Creating Transports
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Alerting/Entities/" title="Entities" class="md-nav__link">
      Entities
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Alerting/Macros/" title="Macros" class="md-nav__link">
      Macros
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Alerting/Testing/" title="Testing" class="md-nav__link">
      Testing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Alerting/Device-Dependencies/" title="Device Dependencies" class="md-nav__link">
      Device Dependencies
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      9. Getting help
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        9. Getting help
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/" title="How to get help" class="md-nav__link">
      How to get help
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/FAQ/" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/Install Validation/" title="Install Validation" class="md-nav__link">
      Install Validation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/Performance/" title="Performance" class="md-nav__link">
      Performance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/Discovery Support/" title="Discovery Support" class="md-nav__link">
      Discovery Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/Poller Support/" title="Poller Support" class="md-nav__link">
      Poller Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/Example-Hardware-Setup/" title="Example Hardware Setups" class="md-nav__link">
      Example Hardware Setups
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/Remote-Monitoring-VPN/" title="Remote Monitoring VPN" class="md-nav__link">
      Remote Monitoring VPN
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/SNMP-Configuration-Examples/" title="SNMP Configuration Examples" class="md-nav__link">
      SNMP Configuration Examples
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/SSL-Configuration/" title="SSL Configuration" class="md-nav__link">
      SSL Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/Device-Troubleshooting/" title="Device Troubleshooting" class="md-nav__link">
      Device Troubleshooting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/Device-Sensors/" title="Device Sensors" class="md-nav__link">
      Device Sensors
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      10. Contributing + Developing
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        10. Contributing + Developing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/Getting-Started/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/Using-Git/" title="Using Git" class="md-nav__link">
      Using Git
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/Code-Guidelines/" title="Code Guidelines" class="md-nav__link">
      Code Guidelines
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/Style-Guidelines/" title="Style Guidelines" class="md-nav__link">
      Style Guidelines
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/Validating-Code/" title="Validating Code" class="md-nav__link">
      Validating Code
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/Code-Structure/" title="Code Structure" class="md-nav__link">
      Code Structure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/Creating-Documentation/" title="Creating Documentation" class="md-nav__link">
      Creating Documentation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/Licensing/" title="Licensing" class="md-nav__link">
      Licensing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Component/" title="Component" class="md-nav__link">
      Component
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../MIB-based-polling/" title="Mib Based Polling (Deprecated)" class="md-nav__link">
      Mib Based Polling (Deprecated)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11-12" type="checkbox" id="nav-11-12">
    
    <label class="md-nav__link" for="nav-11-12">
      Support for a new OS
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="13">
      <label class="md-nav__title" for="nav-11-12">
        Support for a new OS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/Support-New-OS/" title="Intro" class="md-nav__link">
      Intro
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/os/Initial-Detection/" title="Initial Detection" class="md-nav__link">
      Initial Detection
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/os/Mem-CPU-Information/" title="Mem/CPU Information" class="md-nav__link">
      Mem/CPU Information
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/os/Test-Units/" title="Test Units" class="md-nav__link">
      Test Units
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/os/Health-Information/" title="Health Information" class="md-nav__link">
      Health Information
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/os/Wireless-Sensors/" title="Wireless Sensors" class="md-nav__link">
      Wireless Sensors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/os/Custom-Graphs/" title="Custom Graphs" class="md-nav__link">
      Custom Graphs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/os/Settings/" title="Settings" class="md-nav__link">
      Settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/Sensor-State-Support/" title="Sensor State Support" class="md-nav__link">
      Sensor State Support
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/SNMP-Traps/" title="SNMP Traps" class="md-nav__link">
      SNMP Traps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/Dynamic-Config/" title="Dynamic Config" class="md-nav__link">
      Dynamic Config
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/Merging-Pull-Requests/" title="Merging Pull Requests" class="md-nav__link">
      Merging Pull Requests
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/Creating-Release/" title="Creating Release" class="md-nav__link">
      Creating Release
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Plugin-System/" title="Plugin System" class="md-nav__link">
      Plugin System
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-12" type="checkbox" id="nav-12">
    
    <label class="md-nav__link" for="nav-12">
      11. Misc
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-12">
        11. Misc
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../General/Security/" title="Security information" class="md-nav__link">
      Security information
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/CLI-Tools/" title="CLI Scripts" class="md-nav__link">
      CLI Scripts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-12-3" type="checkbox" id="nav-12-3">
    
    <label class="md-nav__link" for="nav-12-3">
      Device Notes
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-12-3">
        Device Notes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/Device-Notes/" title="Intro" class="md-nav__link">
      Intro
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/Device-Notes/Carel-pCOweb-Devices/" title="Carel pCOweb" class="md-nav__link">
      Carel pCOweb
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#new-smokeping-installation" class="md-nav__link">
    New Smokeping installation
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-and-integrate-smokeping-debianubuntu" class="md-nav__link">
    Install and integrate Smokeping - Debian/Ubuntu
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-smokeping" class="md-nav__link">
    Install Smokeping
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-smokeping" class="md-nav__link">
    Configure SmokePing
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configure-smokeping-to-use-librenms-list-of-nodes" class="md-nav__link">
    Configure Smokeping to use LibreNMS list of nodes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generate-librenms-list-of-smokeping-nodes" class="md-nav__link">
    Generate LibreNMS list of Smokeping Nodes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-librenms" class="md-nav__link">
    Configure LibreNMS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-web-server" class="md-nav__link">
    Configure web server
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#apache-configuration" class="md-nav__link">
    Apache Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx-configuration" class="md-nav__link">
    Nginx Configuration
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nginx-password-authentification" class="md-nav__link">
    Nginx Password Authentification
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#start-smokeping" class="md-nav__link">
    Start SmokePing
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verify-in-librenms" class="md-nav__link">
    Verify in LibreNMS
  </a>
  
</li>
      
      
        <li class="md-nav__item">
          <a href="#__source" class="md-nav__link md-nav__link--active">
            Source
          </a>
        </li>
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/librenms/librenms/edit/master/doc/Extensions/Smokeping.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="smokeping-integration">Smokeping integration</h1>
<p><a href="https://oss.oetiker.ch/smokeping/">SmokePing</a> is a tool which lets us
keep track of network latency, and visualise this through RRD graphs.</p>
<p>LibreNMS has support for both new and pre-existing SmokePing installations.</p>
<p>For new installations, we can use the included
<code>scripts/gen_smokeping.php</code> script to generate a Smokeping config file.</p>
<h2 id="new-smokeping-installation">New Smokeping installation</h2>
<h3 id="install-and-integrate-smokeping-debianubuntu">Install and integrate Smokeping - Debian/Ubuntu</h3>
<p>This guide assumes you have already <a href="http://docs.librenms.org/Installation/Installing-LibreNMS/">installed
librenms</a>,
and is working with either <strong>Apache</strong> or
<strong>nginx</strong>.</p>
<p>Note: You may need to install <code>fcgiwrap</code> as well (at least with <code>nginx</code>).</p>
<h3 id="install-smokeping">Install Smokeping</h3>
<pre><code class="bash">sudo apt update &amp;&amp; sudo apt install smokeping
</code></pre>

<h2 id="configure-smokeping">Configure SmokePing</h2>
<p>Smokeping has several configuration files. By default, these are
located in <code>/etc/smokeping/config.d/</code></p>
<p>Edit the <code>General</code> configuration file's <strong>Owner</strong> and <strong>contact</strong>, and
<strong>cgiurl hostname</strong> details:</p>
<pre><code class="bash">nano /etc/smokeping/config.d/General
owner    = LibreNMS-Admin
contact  = admin@ACME.xxx
cgiurl   = http://yourlibrenms/cgi-bin/smokeping.cgi
</code></pre>

<h3 id="configure-smokeping-to-use-librenms-list-of-nodes">Configure Smokeping to use LibreNMS list of nodes</h3>
<p>Add the following line to <code>/etc/smokeping/config</code> config file:</p>
<pre><code class="bash">@include /etc/smokeping/config.d/librenms.conf
</code></pre>

<p>We will generate the conf file in the next step.</p>
<h3 id="generate-librenms-list-of-smokeping-nodes">Generate LibreNMS list of Smokeping Nodes</h3>
<p>LibreNMS comes equipped with a script which exports our list of nodes
from LibreNMS into a configuration file in the format required by
Smokeping.</p>
<p>To generate the config file once:</p>
<pre><code class="bash">(echo &quot;+ LibreNMS&quot;; php -f /opt/librenms/scripts/gen_smokeping.php) | sudo tee /etc/smokeping/config.d/librenms.conf
</code></pre>

<p><strong>However</strong>, it is more desirable to set up a cron job which
regenerates our list of nodes and adds these into Smokeping. You can
add the following to the end of your librenms cron job, e.g. <code>nano /etc/cron.d/librenms</code></p>
<p><strong>Ubuntu 16.04</strong> Sample cron (will run daily at 00:05) :</p>
<pre><code class="bash">05  00    * * *   root (echo &quot;+ LibreNMS&quot;; php -f /opt/librenms/scripts/gen_smokeping.php) &gt; /etc/smokeping/config.d/librenms.conf &amp;&amp; systemctl reload smokeping.service &gt;&gt; /dev/null 2&gt;&amp;1
</code></pre>

<p><strong>Ubuntu 14.04</strong> Sample cron (will run daily at 00:05):</p>
<pre><code class="bash">05  00    * * * root (echo &quot;+ LibreNMS&quot;; php -f /opt/librenms/scripts/gen_smokeping.php) &gt; /opt/smokeping/etc/librenms.conf &amp;&amp; /opt/smokeping/bin/smokeping --reload &gt;&gt; /dev/null 2&gt;&amp;1
</code></pre>

<p><strong>Why echo "+ LibreNMS" ?</strong></p>
<p>This is in the cron job because the <code>gen_smokeping.php</code> script contains</p>
<pre><code>menu = Top
title = Network Latency Grapher
</code></pre>

<p>Which can cause Smokeping to not start. <code>echo "+ LibreNMS"</code> prepends
this in our smokeping config file. We could remove the above from the
gen_smokeping script, however this may cause issues with LibreNMS
failing to update with <code>daily.sh</code> due config files being modified.</p>
<h2 id="configure-librenms">Configure LibreNMS</h2>
<p>Edit <code>/opt/librenms/config.php</code> and add the following:</p>
<p><strong>Note:</strong> Make sure you point dir to the correct Smokeping data directory:</p>
<pre><code class="php">$config['smokeping']['dir'] = '/var/lib/smokeping'; // Ubuntu 16.04 and newer Location
#$config['smokeping']['dir'] = '/opt/smokeping/data';
$config['smokeping']['pings'] = 20;    // should be equal to &quot;pings&quot; in your smokeping config
$config['smokeping']['integration'] = true;
</code></pre>

<h2 id="configure-web-server">Configure web server</h2>
<p>This section covers the required configuration for your web server of
choice. This covers the required configuration for either Apache or Nginx.</p>
<h3 id="apache-configuration">Apache Configuration</h3>
<p>Smokeping should automatically install an Apache config file in
<code>/etc/apache2/conf-available/</code>. Verify this using :</p>
<pre><code class="bash">librenms@librenms:~/scripts$ ls /etc/apache2/conf-available/ | grep smokeping
smokeping.conf
</code></pre>

<p>If you don't see <code>smokeping.conf</code> listed, you'll need to create a symlink for it:</p>
<pre><code class="bash">ln -s /etc/smokeping/apache2.conf /etc/apache2/conf-available/smokeping.conf
</code></pre>

<p>After creating the symlink, restart Apache with <code>sudo systemctl apache2 restart</code></p>
<p>You should be able to load the Smokeping web interface at <code>http://yourhost/cgi-bin/smokeping.cgi</code></p>
<h3 id="nginx-configuration">Nginx Configuration</h3>
<p>This section assumes you have configured LibreNMS with Nginx as
specified in <a href="https://docs.librenms.org/Installation/Installation-Ubuntu-1804-Nginx/">Configure Nginx</a>.</p>
<p>Add the following configuration to your <code>/etc/nginx/conf.d/librenms</code> config file.</p>
<p>The following will configure Nginx to respond to <code>http://yourlibrenms/smokeping</code>:</p>
<pre><code>#Browsing to `http://librenms.xxx/smokeping/` should bring up the smokeping web interface

 location = /smokeping/ {
        fastcgi_intercept_errors on;

        fastcgi_param   SCRIPT_FILENAME         /usr/lib/cgi-bin/smokeping.cgi;
        fastcgi_param   QUERY_STRING            $query_string;
        fastcgi_param   REQUEST_METHOD          $request_method;
        fastcgi_param   CONTENT_TYPE            $content_type;
        fastcgi_param   CONTENT_LENGTH          $content_length;
        fastcgi_param   REQUEST_URI             $request_uri;
        fastcgi_param   DOCUMENT_URI            $document_uri;
        fastcgi_param   DOCUMENT_ROOT           $document_root;
        fastcgi_param   SERVER_PROTOCOL         $server_protocol;
        fastcgi_param   GATEWAY_INTERFACE       CGI/1.1;
        fastcgi_param   SERVER_SOFTWARE         nginx/$nginx_version;
        fastcgi_param   REMOTE_ADDR             $remote_addr;
        fastcgi_param   REMOTE_PORT             $remote_port;
        fastcgi_param   SERVER_ADDR             $server_addr;
        fastcgi_param   SERVER_PORT             $server_port;
        fastcgi_param   SERVER_NAME             $server_name;
        fastcgi_param   HTTPS                   $https if_not_empty;

        fastcgi_pass unix:/var/run/fcgiwrap.socket;
}

        location ^~ /smokeping/ {
                alias /usr/share/smokeping/www/;
                index smokeping.cgi;
                gzip off;
        }
</code></pre>

<p>After saving the config file, verify your Nginx config file syntax is
OK with <code>sudo nginx -t</code>, then restart Nginx with <code>sudo systemctl restart nginx</code></p>
<p>You should be able to load the Smokeping web interface at <code>http://yourhost/smokeping</code></p>
<h4 id="nginx-password-authentification">Nginx Password Authentification</h4>
<p>You can use the purpose-made htpasswd utility included in the
apache2-utils package (Nginx password files use the same format as
Apache). You can install it on Ubuntu with</p>
<pre><code>apt install apache2-utils
</code></pre>

<p>After that you need to create password for your user</p>
<pre><code>htpasswd -c /etc/nginx/.htpasswd USER
</code></pre>

<p>You can verify your user and password with</p>
<pre><code>cat /etc/nginx/.htpasswd
</code></pre>

<p>Then you just need to add to your config <code>auth_basic</code> parameters</p>
<pre><code>        location ^~ /smokeping/ {
                alias /usr/share/smokeping/www/;
                index smokeping.cgi;
                gzip off;
                auth_basic &quot;Private Property&quot;;
                auth_basic_user_file /etc/nginx/.htpasswd;
        }
</code></pre>

<h3 id="start-smokeping">Start SmokePing</h3>
<p>Use the below commands to start and verify smokeping is running.</p>
<p><strong>Ubuntu 14.04:</strong>  <code>sudo service smokeping start</code></p>
<p>Verify: <code>sudo service smokeping status</code></p>
<p><strong>Ubuntu 16.04 and newer:</strong>  <code>sudo systemctl start smokeping</code></p>
<p>Verify: <code>sudo systemctl status smokeping</code></p>
<h2 id="verify-in-librenms">Verify in LibreNMS</h2>
<p>Within LibreNMS, you should now have a new device sub-tab called Ping</p>
<hr />
<h1 id="pre-existing-smokeping-installation">Pre-Existing Smokeping Installation</h1>
<p>The following section covers the requirements for an existing
SmokePing installation. The primary difference is this section does
not cover using the LibreNMS Smokeping config script, and assumes an
existing Smokeping server is set up and working correctly.</p>
<p>In terms of configuration, simply add the location of where smokeping
data such as RRD files are stored. If this is on a separate server,
ensure there is a mount point reachable, along with the server's hostname.</p>
<p><strong>Note:</strong> The location should be the RRD root folder, NOT the
sub-directory such as network.</p>
<pre><code class="php">$config['smokeping']['dir'] = '/var/lib/smokeping'; // Ubuntu 16.04 and newer Location
#$config['smokeping']['dir'] = '/opt/smokeping/data';
$config['smokeping']['pings'] = 20;    // should be equal to &quot;pings&quot; in your smokeping config
$config['smokeping']['integration'] = true;
</code></pre>

<p>You should now see a new tab in your device page called ping.</p>
<h1 id="issues">Issues</h1>
<h2 id="error-etcsmokepingconfigdpathnames-line-1-file-usrsbinsendmail-does-not-exist"><code>ERROR: /etc/smokeping/config.d/pathnames, line 1: File '/usr/sbin/sendmail' does not exist</code></h2>
<p>If you got this error at the end of the installation, simply edit
smokeping's config file like so:</p>
<pre><code class="diff">nano /etc/smokeping/config.d/pathnames

-sendmail = /usr/sbin/sendmail
+#sendmail = /usr/sbin/sendmail
</code></pre>

<h2 id="smokeping-and-rrdcached">Smokeping and RRDCached</h2>
<p>If you are using the standard smokeping data dir
(<code>/etc/smokeping/data</code>) then you may need to alter the rrdcached
config slightly.</p>
<p>In the standard configuration the -B argument may have been used to
restrict rrdcached to read only from a single base dir.</p>
<p>If this is true, when you try an open one of the smokeping graphs from
within LibreNMS you will see something like this error at the end of
the rrdcached command:</p>
<pre><code class="bash">ERROR: rrdcached: /var/lib/smokeping/&lt;device name&gt;.rrd: Permission denied
</code></pre>

<p>You will need to either change the dir in which smokeping saves its
rrd files to be the same as the main librenms dir or you can remove
the -B argument from the rrdcached config to allow it to read from
more than one dir.</p>
<h3 id="to-remove-the-b-switch">To remove the -B switch:</h3>
<pre><code class="bash">sudo nano /etc/default/rrdcached
</code></pre>

<p>then find:</p>
<pre><code class="bash">BASE_OPTIONS=
</code></pre>

<p>If -B is in the list of arguments delete it.</p>
<h3 id="to-store-smokeping-rrd-in-librenms-rrd-folder">To store smokeping rrd in librenms rrd folder</h3>
<pre><code class="bash">sudo systemctl stop smokeping
sudo mv /var/lib/smokeping/ /opt/librenms/rrd/
sudo nano /etc/smokeping/config.d/pathnames
</code></pre>

<p>Then update the config file:</p>
<pre><code class="bash">datadir = /opt/librenms/rrd/smokeping
dyndir = /opt/librenms/rrd/smokeping/__cgi
</code></pre>

<p>And give to smokeping rights to access files</p>
<pre><code class="bash">sudo usermod -a -G librenms smokeping
</code></pre>

<p>Restart smokeping service</p>
<pre><code class="bash">sudo systemctl start smokeping
</code></pre>

<p>Finally update smokeping rrd path in librenms</p>
<pre><code class="bash">nano /opt/librenms/config.php
</code></pre>

<pre><code class="php">$config['smokeping']['dir'] = '/opt/librenms/rrd/smokeping';
#$config['smokeping']['dir'] = '/var/lib/smokeping';
</code></pre>
                
                  
                    <h2 id="__source">Source</h2>
                    
                    
                      
                    
                    
                    
                    <a href="https://github.com/librenms/librenms/blob/master/doc//Extensions/Smokeping.md" title="Extensions/Smokeping.md" class="md-source-file">
                      Extensions/Smokeping.md
                    </a>
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../metrics/Prometheus/" title="Prometheus" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Prometheus
              </span>
            </div>
          </a>
        
        
          <a href="../Weathermap/" title="Weathermap" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Weathermap
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.808e90bb.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>