<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="author" content="LibreNMS">
    <link rel="canonical" href="http://docs.librenms.org/Developing/os/Test-Units/">
    <link rel="shortcut icon" href="../../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Test Units - LibreNMS Docs</title>
    <link href="../../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../css/highlight.css">
    <link href="../../../librenms.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../../js/jquery-3.2.1.min.js"></script>
    <script src="../../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../../..';
      var is_top_frame = false;
        
        var pageToc = [
        ];

    </script>
    <script src="../../../js/base.js"></script>
      <script src="../../../search/require.js"></script>
      <script src="../../../search/search.js"></script>
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-79149977-2', 'docs.librenms.org');
        ga('send', 'pageview');
    </script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
    
      <div class="source-links">
      
          <span class="label label-primary"><a href="https://github.com/librenms/librenms//edit/master/doc/Developing/os/Test-Units.md" target="_blank" style="color:#ffffff"><i class="fa fa-pencil"></i> Edit on GitHub</a></span>
      
      </div>
    

    <p>We have a testing unit for new OS', please ensure you add a test for any new OS' or updates to existing OS discovery.</p>
<p>All that you need to do is create an snmprec file in tests/snmpsim with the proper name. If adding the first test for
this os, simply use the os name <code>pulse.snmprec</code> for example.  If you need to add multiple test files, you can add an
underscore after the os name followed by a description, typically a model name.  For example: <code>pulse_mag2600.snmprec</code>.
You can copy <code>skel.snmprec</code> to your intended name and fill in the data to make things a little easier.</p>
<p>We utilise <a href="http://snmpsim.sourceforge.net/">snmpsim</a> to do unit testing for OS discovery. For this to work you need
to supply an snmprec file. This is pretty simple and using pulse as the example again this would look like:</p>
<p><code>tests/snmpsim/pulse_mag2600.snmprec</code></p>
<pre><code>1.3.6.1.2.1.1.1.0|4|Pulse Secure,LLC,MAG-2600,8.0R14 (build 41869)
1.3.6.1.2.1.1.2.0|6|1.3.6.1.4.1.12532.254.1.1
</code></pre>

<p>During testing LibreNMS will use any info in the snmprec file for snmp calls.  This one provides
sysDescr (<code>.1.3.6.1.2.1.1.1.0</code>, 4 = Octet String) and sysObjectID (<code>.1.3.6.1.2.1.1.2.0</code>, 6 = Object Identifier),
 which is the minimum that should be provided for new snmprec files.</p>
<p>To look up the numeric OID and type of an string OID with snmptranslate:</p>
<pre><code class="bash">snmptranslate -On -Td SNMPv2-MIB::sysDescr.0
</code></pre>

<p>Common OIDs used in discovery:</p>
<table>
<thead>
<tr>
<th>String OID</th>
<th>Numeric OID</th>
</tr>
</thead>
<tbody>
<tr>
<td>SNMPv2-MIB::sysDescr.0</td>
<td>1.3.6.1.2.1.1.1.0</td>
</tr>
<tr>
<td>SNMPv2-MIB::sysObjectID.0</td>
<td>1.3.6.1.2.1.1.2.0</td>
</tr>
<tr>
<td>ENTITY-MIB::entPhysicalDescr.1</td>
<td>1.3.6.1.2.1.47.1.1.1.1.2.1</td>
</tr>
<tr>
<td>ENTITY-MIB::entPhysicalMfgName.1</td>
<td>1.3.6.1.2.1.47.1.1.1.1.12.1</td>
</tr>
</tbody>
</table>
<p>List of SNMP data types:</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>OCTET STRING</td>
<td>4</td>
</tr>
<tr>
<td>HEX STRING</td>
<td>4x</td>
</tr>
<tr>
<td>Integer32</td>
<td>2</td>
</tr>
<tr>
<td>NULL</td>
<td>5</td>
</tr>
<tr>
<td>OBJECT IDENTIFIER</td>
<td>6</td>
</tr>
<tr>
<td>IpAddress</td>
<td>64</td>
</tr>
<tr>
<td>Counter32</td>
<td>65</td>
</tr>
<tr>
<td>Gauge32</td>
<td>66</td>
</tr>
<tr>
<td>TimeTicks</td>
<td>67</td>
</tr>
<tr>
<td>Opaque</td>
<td>68</td>
</tr>
<tr>
<td>Counter64</td>
<td>70</td>
</tr>
</tbody>
</table>
<p>Hex encoded strings (4x) should be used for any strings that contain line returns.</p>
<p>You can run <code>./scripts/pre-commit.php -u</code> to run the unit tests to check your code.</p>
<p>If you would like to run tests locally against a full snmpsim instance, run <code>./scripts/pre-commit.php -u --snmpsim</code>.</p>

  <br>
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../Health-Information/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../Health-Information/" class="btn btn-xs btn-link">
        Health Information
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../Mem-CPU-Information/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../Mem-CPU-Information/" class="btn btn-xs btn-link">
        Mem CPU Information
      </a>
    </div>
    
  </div>


    <br>
</div>

<footer class="col-md-12 wm-page-content">
  <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>